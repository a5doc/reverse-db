reverse-db
==========

a5doc の table定義を既存のDBからリバースエンジニアリングで作成するためのツールです。

## 実装例と説明

reverse.js

```javascript
const reverseDb = require('reverse-db')

const config = {
  database: 'testdb',          // (1)
  username: 'user1',           // (2)
  password: 'pass1',           // (3)
  host: '192.168.33.10',       // (4)
  dialect: 'mysql',            // (5)
  tables: [                    // (6)
    'user',
    'group',
    'order',
  ],
  output: './設計/.table',     // (7)
};

reverseDb.reverse(config);     // (8)
```

* **(1)** データベース名
* **(2)** 接続ユーザー
* **(3)** 接続パスワード
* **(4)** ホスト名
* **(5)** DB （sequelizeがサポートするDB）
* **(6)** リバースエンジニアするテーブル名
* **(7)** テーブル定義の元となる yaml ファイルを出力するディレクトリ
* **(8)** 実行します

## このツールの用途

既存システムで、テーブル定義とかの設計書を作成してこなかったシステムがあって、
規模が大きくなってきたので、そろそろテーブルの設計書がないと、わからなくなってきているような、そんなケースを想定しています。

上記の実装例にあるようなコードを作成して実行します。

```
npm install a5doc/reverse-db --save
node reverse.js
```

これで、 output で指定したディレクトリ内に yaml が作成されるので、
a5doc のコマンドでマークダウンを作成します。

```
a5doc table
```

このバージョンでは、インデックスとFKの出力までは行っていないので、yamlを出力後、追記してください。

使い方としては、ザックリとテーブル定義を作成して、概要とか補足説明などは、出力された yaml を修正する感じの使い方になります。  
とっかかりのひな形を起こすことを目的としていて、DBとドキュメントを無加工で自動同期しようとか、そういう用途ではありません。CRUDのソースコードのscaffoldを想像してもらうとよいかと思います。

ER図を出力するには、[作成手順](https://github.com/a5doc/cli#ER%E5%9B%B3%E3%81%AE%E4%BD%9C%E6%88%90) を確認して、a5doc.yml と 出力したテーブルの yaml の FK などを加筆して、作成してください。

